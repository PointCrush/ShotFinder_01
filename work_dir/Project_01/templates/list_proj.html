{% extends 'base/base.html' %}

{% block content %}
<style>
img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

.ov-f {
    overflow: hidden;
}
.cl {
    background-color: #F5F5F5;
}



</style>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-3 col-lg-2 filter-container mt-3">
            <form method="get">
                {{ filter.form.as_p }}
                <button type="submit" class="btn btn-primary mt-2">Фильтр</button>
            </form>
        </div>
        <div class="col-md-9 col-lg-10">
                <div class="row">
            {% for project in filter.qs %}
        <div class="col-md-5 col-lg-6">
            <div class="card m-3 cl shadow">
                <div class="row">
                    <div class="col-3">
                        <p class="text-center">{{ project.owner}}</p>
                    </div>
                    <div class="col-6">
                        <h3 class="text-center">{{ project.name }}</h3>
                    </div>
                    <div class="col-3">
                        {% if project.tfp %}
                        <p class="text-center">ТфП проект</p>
                        {% else %}
                        <p class="text-center">Коммерческий проект</p>
                        {% endif %}
                    </div>
                </div>

                <div class="row">

                    <div class="col-6">
                        <div class="card m-3 p-0 ov-f">
                            <div class="row p-0 m-0">
                                {% for image in project.references.all %}
                                <div class="col-4 p-0">
                                    <img src='{{ image.image.url }}' class="img">
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="container mt-3 p-2">

                        <p><strong>Город:</strong> {{ project.city }}</p>
                        <p><strong>Ищу:</strong> {{ project.looking_for.all|join:", " }}</p>
                        <p><strong>О проекте:</strong> {{ project.description|slice:":100" }}...</p>
                        {% if project.price %}
                        <p><strong>Price:</strong> {{ project.price }}</p>
                        {% endif %}
                        <p><strong>Last updated:</strong> {{ project.time_update }}</p>
                        <p><strong>Created:</strong> {{ project.time_create }}</p>

                    </div>
                    <a href="{% url 'project_detail' project_pk=project.pk %}"><button class="btn btn-primary">Подробнее</button></a>
                    </div>
                </div>

            </div>
            </div>
            {% endfor %}
        </div>
        </div>
    </div>
</div>
{% endblock %}